<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flicking Layout</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <style>
    body{background-color:#f9f9f9;}

    #wrapper{max-width:750px;margin:0 auto;background-color:#fff;position: relative;}

    .top-menu .slide-nav a{display:block;padding:18px 30px;font-size:100%;height:100%;font-size:30px;line-height:40px;text-align:center;}
    .top-menu .slide-nav.nav-active a{color:#1b73d4;}

    .flicking-camera{position:relative;}
    .panel_slide{min-height:100px;height:100%;overflow:hidden;width:100%;}

    .card-swiper.swiper-container{overflow:inherit;padding:30px;}
    .card-swiper.swiper-container .swiper-slide{width:500px;margin-right:10px;border-radius:5px;overflow:hidden;}
    .card-swiper.swiper-container .swiper-slide:last-child{margin-right:0;}
    .sample-number{font-size:42px;padding:150px 0;text-align:center;}
  </style>
  <link rel="stylesheet" href="css/flicking.css">
  <link rel="stylesheet" href="css/flicking-plugins.css">
  <link rel="stylesheet" href="css/swiper.8.1.4.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/swiper.8.1.4.js"></script>
  <script src="js/flicking.pkgd.min.js"></script>
  <script src="js/flicking.plugins.min.js"></script>
  <script src="js/aos.js"></script>
</head>
<body>
  <div id="wrapper">
    <div class="top-menu flicking-viewport flicking-sync">
      <div class="flicking-camera">
        <div class="slide-nav"><a href="javascript:void(0)"><b>홈</b></a></div>
        <div class="slide-nav"><a href="javascript:void(0)"><b>합격예측</b></a></div>
        <div class="slide-nav"><a href="javascript:void(0)"><b>대입정보</b></a></div>
        <div class="slide-nav"><a href="javascript:void(0)"><b>대학/학과</b></a></div>
        <div class="slide-nav"><a href="javascript:void(0)"><b>진학TV</b></a></div>
        <div class="slide-nav"><a href="javascript:void(0)"><b>북이북</b></a></div>
      </div>
    </div>
    <div id="contents">
      <div class="flicking-viewport flicking-sync-panel">
        <div class="flicking-camera">
          <div class="panel_slide">
            <div class="inner">
              <div class="disabledArea">
                <div class="card-swiper swiper-container">
                  <div class="swiper-wrapper">
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                    <div class="swiper-slide"><a href="#"><img src="https://via.placeholder.com/500x190" alt=""></a></div>
                  </div>
                </div>
              </div>
              <p class="sample-number">1</p>
              <p class="sample-number">1</p>
              <p class="sample-number">1</p>
              <p class="sample-number">1</p>
              <p class="sample-number">1</p>
              <p class="sample-number">1</p>
            </div>
          </div>
          <div class="panel_slide">
            <div class="inner">
              <p class="sample-number">2</p>
              <p class="sample-number">2</p>
              <p class="sample-number">2</p>
              <p class="sample-number">2</p>
            </div>
          </div>
          <div class="panel_slide">
            <div class="inner">
              <p class="sample-number">3</p>
              <p class="sample-number">3</p>
              <p class="sample-number">3</p>
            </div>
          </div>
          <div class="panel_slide">
            <div class="inner">
              <p class="sample-number">4</p>
              <p class="sample-number">4</p>
            </div>
          </div>
          <div class="panel_slide">
            <div class="inner">
              <p class="sample-number">5</p>
            </div>
          </div>
          <div class="panel_slide">
            <div class="inner">
              <p class="sample-number">6</p>
            </div>
          </div>
        </div>
      </div>
    </div><!-- #contents -->
  </div><!-- #wrapper -->
  <script>
    var cardSwiper = new Swiper('.card-swiper', {
      slidesPerView: 'auto',
      observer: true,
      observeParents: true,
      observeSlideChildren: true,
    });

    var height;
    var delay = 300;
    var timer = null;
    var panel = document.querySelectorAll(".panel_slide");
    
    Array.prototype.forEach.call(panel, function (panelTarget, index) {
      var _this = panelTarget.childNodes[1].getBoundingClientRect().height;
      panelTarget.style.height = _this + "px";
    });

    var flickingSync = new Flicking(".flicking-sync", {
      defaultIndex: 0,
      //moveType: "freeScroll",
      align: "prev",
      circular: false,
      bound: true,
      bounce: 30
    });

    var flickingSyncPanel = new Flicking(".flicking-sync-panel", {
      defaultIndex: 0,
      moveType: "strict",
      horizontal: true,
      align: "prev",
      circular: true,
      bounce: 30,
      adaptive: true,
      resizeOnContentsReady: true,
      renderOnlyVisible: true
    });

    flickingSync.addPlugins(new Flicking.Plugins.Sync({
      type: "index",
      synchronizedFlickingOptions: [{
          flicking: flickingSync,
          isClickable: true,
          activeClass: "nav-active"
        },
        {
          flicking: flickingSyncPanel,
          isSlidable: true,
          isClickable: false,
          activeClass: "panel-active"
        }
      ]
    }));

    function enabledEvent(event) {
      //console.log("enable")
      flickingSyncPanel.enableInput();
    }

    function disabledEvent(event) {
      //console.log("disabled")
      flickingSyncPanel.disableInput();
    }

    // enable Touch
    var _enabled = document.getElementById("contents");
    _enabled.addEventListener('touchstart', enabledEvent, false);
    _enabled.addEventListener('touchmove', enabledEvent, false);

    // disable Touch
    var _disabled = document.querySelectorAll(".disabledArea");
    Array.prototype.forEach.call(_disabled, function (_target, index) {
      var _this = _target;

      _this.addEventListener('touchstart', disabledEvent, false);
      _this.addEventListener('touchmove', disabledEvent, false);
    });

    flickingSyncPanel.on("changed", function (e) {
      console.log("change")
    });

    for (var i = 1; i <= 3; i++) {
      var mainSlider = new Swiper('.main_slider_' + i, {
        // autoplay: {
        // 	delay: 2500,
        // 	disableOnInteraction: false,
        // },
        slidesPerView: 'auto',
        loop: true,
        pagination: {
          el: '.swiper-pagination',
          dynamicBullets: false,
        },
      });
    };
  </script>
  
</body>
</html>